<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.7.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2018-02-02T21:47:23+04:00</updated><id>http://localhost:4000/</id><title type="html">Hazaq</title><subtitle>All things Linux | OpenSource Software | Redhat | AWS | DevOps | Zimbra</subtitle><entry><title type="html">Zimbra Server Status shows all failed services</title><link href="http://localhost:4000/zimbra/2018/02/02/Zimbra-Server-Status.html" rel="alternate" type="text/html" title="Zimbra Server Status shows all failed services" /><published>2018-02-02T19:39:59+04:00</published><updated>2018-02-02T19:39:59+04:00</updated><id>http://localhost:4000/zimbra/2018/02/02/Zimbra-Server-Status</id><content type="html" xml:base="http://localhost:4000/zimbra/2018/02/02/Zimbra-Server-Status.html">&lt;p&gt;Zimbra have an old problem with its monitoring page. You might see all stopped status on Server Status page even when all Services are running. 
&lt;img src=&quot;/assets/images/zimbraStatus.png&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;br /&gt;
To fix this issue:&lt;br /&gt;
1) Check the permissions of &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/spool/cron/zimbra&lt;/code&gt; file. It should be owned by zimbra and should be 600. If not please run:&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;chown zimbra:zimbra /var/spool/cron/zimbra&lt;/code&gt;&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;chmod 600 /var/spool/cron/zimbra&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Wait for 30 minutes for any change to take effect. &lt;br /&gt;
If the above doesn’t fix your problem,&lt;/p&gt;

&lt;p&gt;2) Change line in zimbra user’s crontab&lt;br /&gt;
from&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;*/30 * * * * /opt/zimbra/libexec/zmstatuslog &amp;gt; /dev/null 2&amp;gt;&amp;amp;1&lt;/code&gt;&lt;br /&gt;
to&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;*/2 * * * * /opt/zimbra/libexec/zmstatuslog &amp;gt; /dev/null 2&amp;gt;&amp;amp;1&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;3) Then restart zmstatctl service&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;zmstatctl restart&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;4) Run the status logger manually:&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;/opt/zimbra/libexec/zmstatuslog&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Again, wait for 30 minutes for any change to take effect. &lt;br /&gt;
Monitor server status for couple of hours to make sure that the status hasn’t changed back.&lt;/p&gt;
&lt;h4 id=&quot;rrd-tool-time-offset-zimbra-88-and-above&quot;&gt;RRD tool time offset (Zimbra 8.8 and above)&lt;/h4&gt;
&lt;p&gt;Another issue that might cause the zimbra server status to fail could be because of RRD tool time offset. RRD is now being used in the latest ZCS versions to display the graphical output under Zimbra Monitor. This issue can come if for some reason the timezone or time of the zimbra host machine is changed after the installation of zimbra.&lt;br /&gt;
To verify the rrd time offset you should get this error message in &lt;code class=&quot;highlighter-rouge&quot;&gt;'/opt/zimbra/log/zmlogswatch.out'&lt;/code&gt;&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;illegal attempt to update using time &amp;lt;EpocTime&amp;gt; when last update time is &amp;lt;EpocTime&amp;gt;&lt;/code&gt;&lt;br /&gt;
This happens because RRD tool does not have the permission to update time in the database where it is storing the logs.&lt;br /&gt;
An easy fix that works for me is to remove all the RRD db files so that it can be regenerated&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Stop&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zmlogger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;be&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;safe&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zimbra&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/opt/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zimbra&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;db&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rrds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;old&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mv&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/opt/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zimbra&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;db&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rrds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rrd&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/opt/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zimbra&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;db&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rrds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;old&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;back&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;again&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;</content><author><name></name></author><summary type="html">Zimbra have an old problem with its monitoring page. You might see all stopped status on Server Status page even when all Services are running. To fix this issue: 1) Check the permissions of /var/spool/cron/zimbra file. It should be owned by zimbra and should be 600. If not please run: chown zimbra:zimbra /var/spool/cron/zimbra chmod 600 /var/spool/cron/zimbra</summary></entry></feed>
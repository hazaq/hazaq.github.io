<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.7.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2018-02-13T00:38:24+04:00</updated><id>http://localhost:4000/</id><title type="html">Hazaq</title><subtitle>All things Linux | OpenSource Software | Redhat | AWS | DevOps | Zimbra</subtitle><entry><title type="html">Zimbra Server Status shows all failed services</title><link href="http://localhost:4000/zimbra/2018/02/02/Zimbra-Server-Status.html" rel="alternate" type="text/html" title="Zimbra Server Status shows all failed services" /><published>2018-02-02T19:39:59+04:00</published><updated>2018-02-02T19:39:59+04:00</updated><id>http://localhost:4000/zimbra/2018/02/02/Zimbra-Server-Status</id><content type="html" xml:base="http://localhost:4000/zimbra/2018/02/02/Zimbra-Server-Status.html">&lt;p&gt;Zimbra have an old problem with its monitoring page. You might see all stopped status on Server Status page even when all Services are running. 
&lt;img src=&quot;/assets/images/zimbraStatus.png&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;To fix this issue:&lt;br /&gt;
1) Check the permissions of &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/spool/cron/zimbra&lt;/code&gt; file. It should be owned by zimbra and should be 600. If not please run:&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;chown zimbra:zimbra /var/spool/cron/zimbra&lt;/code&gt;&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;chmod 600 /var/spool/cron/zimbra&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Wait for 30 minutes for any change to take effect. &lt;br /&gt;
If the above doesn’t fix your problem,&lt;/p&gt;

&lt;p&gt;2) Change line in zimbra user’s crontab&lt;br /&gt;
from&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;*/30 * * * * /opt/zimbra/libexec/zmstatuslog &amp;gt; /dev/null 2&amp;gt;&amp;amp;1&lt;/code&gt;&lt;br /&gt;
to&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;*/2 * * * * /opt/zimbra/libexec/zmstatuslog &amp;gt; /dev/null 2&amp;gt;&amp;amp;1&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;3) Then restart zmstatctl service&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;zmstatctl restart&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;4) Run the status logger manually:&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;/opt/zimbra/libexec/zmstatuslog&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Again, wait for 30 minutes for any change to take effect. &lt;br /&gt;
Monitor server status for couple of hours to make sure that the status hasn’t changed back.&lt;/p&gt;
&lt;h4 id=&quot;rrd-tool-time-offset-zimbra-88-and-above&quot;&gt;RRD tool time offset (Zimbra 8.8 and above)&lt;/h4&gt;
&lt;p&gt;Another issue that might cause the zimbra server status to fail could be because of RRD tool time offset. RRD is now being used in the latest ZCS versions to display the graphical output under Zimbra Monitor. This issue can come if for some reason the timezone or time of the zimbra host machine is changed after the installation of zimbra.&lt;br /&gt;
To verify the rrd time offset you should get this error message in &lt;code class=&quot;highlighter-rouge&quot;&gt;'/opt/zimbra/log/zmlogswatch.out'&lt;/code&gt;&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;illegal attempt to update using time &amp;lt;EpocTime&amp;gt; when last update time is &amp;lt;EpocTime&amp;gt;&lt;/code&gt;&lt;br /&gt;
This happens because RRD tool does not have the permission to update time in the database where it is storing the logs.&lt;br /&gt;
An easy fix that works for me is to remove all the RRD db files so that it can be regenerated&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Stop&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zmlogger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;be&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;safe&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zimbra&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/opt/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zimbra&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;db&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rrds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;old&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mv&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/opt/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zimbra&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;db&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rrds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rrd&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/opt/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zimbra&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;db&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rrds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;old&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;back&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;again&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">Zimbra have an old problem with its monitoring page. You might see all stopped status on Server Status page even when all Services are running. To fix this issue: 1) Check the permissions of /var/spool/cron/zimbra file. It should be owned by zimbra and should be 600. If not please run: chown zimbra:zimbra /var/spool/cron/zimbra chmod 600 /var/spool/cron/zimbra</summary></entry><entry><title type="html">Zimbra 8.8 known Issues</title><link href="http://localhost:4000/zimbra/2018/02/02/Zimbra-8.8-common-issues.html" rel="alternate" type="text/html" title="Zimbra 8.8 known Issues" /><published>2018-02-02T19:39:59+04:00</published><updated>2018-02-02T19:39:59+04:00</updated><id>http://localhost:4000/zimbra/2018/02/02/Zimbra-8.8-common-issues</id><content type="html" xml:base="http://localhost:4000/zimbra/2018/02/02/Zimbra-8.8-common-issues.html">&lt;p&gt;&lt;strong&gt;Zimbra webmail https error&lt;/strong&gt;&lt;br /&gt;
After installing zimbra 8.8 if you try to access the webmail using the IP and https protocol you may get “Secure Connection Failed” error on your browser. 
To fix this you need to set the zimbraVirtualHostname and zimbraVirtualIPAddress for the zimbra domains. 
For example for the domain domain.local with IP 192.168.1.1 run the following command.&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;zmprov&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;md&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;domain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zimbraVirtualHostname&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`hostname -f`&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zimbraVirtualIPAddress&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;192.168&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.1&lt;/span&gt;
&lt;span class=&quot;sr&quot;&gt;/opt/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zimbra&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;libexec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zmproxyconfgen&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;zmproxyctl&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;restart&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above command should be run as zimbra user.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;RRD Tool&lt;/strong&gt;&lt;br /&gt;
View &lt;a href=&quot;http://hazaq.me/zimbra/2018/02/02/Zimbra-Server-Status.html&quot;&gt;this&lt;/a&gt; Document&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;FireFox and Zimbra Admin interface&lt;/strong&gt;&lt;br /&gt;
Zimbra 8.7 and above admin interface has an issue with firefox, if you quickly modify some settings for a user using admin interface without letting firefox load the complete page, for example changing the account status, zimbra might delete the unloaded setting for the user.  So either use firefox patiently or you might want to use google Chrome which is reported better at this.&lt;br /&gt;
&lt;a href=&quot;https://forums.zimbra.org/viewtopic.php?t=61416#p275836&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Zimbra IP change&lt;/strong&gt;&lt;br /&gt;
If IP needs to be changed on a running Zimbra server apart from changing the obvious like mynetworks, zimbraVirtualIPAddress etc you might want to change ldap bind address. Zimbra ldap bind it self to the IP and if the users try to authenticate from a different IP ldap will not respond. so to fix this&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#As zimbra  &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;zmlocalconfig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ldap_bind_url'&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#This will give you the currnet value of ldap bind address  &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;zmlocalconfig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ldap://&amp;lt;ip&amp;gt;:&amp;lt;port&amp;gt;&quot;&lt;/span&gt;  
&lt;span class=&quot;n&quot;&gt;ldap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;  
&lt;span class=&quot;n&quot;&gt;ldap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">Zimbra webmail https error After installing zimbra 8.8 if you try to access the webmail using the IP and https protocol you may get “Secure Connection Failed” error on your browser. To fix this you need to set the zimbraVirtualHostname and zimbraVirtualIPAddress for the zimbra domains. For example for the domain domain.local with IP 192.168.1.1 run the following command. zmprov md domain.local zimbraVirtualHostname `hostname -f` zimbraVirtualIPAddress 192.168.1.1 /opt/zimbra/libexec/zmproxyconfgen zmproxyctl restart The above command should be run as zimbra user.</summary></entry></feed>